@using CO.CDP.RegisterOfCommercialTools.App.Models
@model CO.CDP.RegisterOfCommercialTools.App.Models.SearchModel
@{
    var cpvSelection = new CpvCodeSelection
    {
        SelectedCodes = Model.CpvCodes
    };
    var selectorOptions = new HierarchicalCodeSelectorOptions
    {
        CodeType = "CPV",
        ModalTitle = "Select CPV codes",
        SearchPlaceholder = "e.g. agricultural or 03000000",
        RoutePrefix = "cpv",
        FieldName = "cpv",
        BrowseButtonId = "browse-cpv-codes",
        ModalId = "cpv-selector-modal",
        SearchInputId = "cpv-search",
        TreeContainerId = "cpv-tree",
        SearchContainerId = "search-results-list",
        SelectionContainerId = "selected-codes-list"
    };
}

<div class="govuk-!-margin-top-0">
    <p class="govuk-body-s govuk-!-padding-left-2">The common procurement vocabulary (CPV) is used to classify contracts
        in a standardised way</p>

    <div class="accordion-highlight govuk-!-padding-2 govuk-!-margin-left-2 govuk-!-margin-right-4">
        <a href="#" class="govuk-link" id="@selectorOptions.BrowseButtonId">
            @cpvSelection.BrowseLinkText
        </a>
    </div>

    @if (cpvSelection.HasSelections)
    {
        <div class="govuk-!-margin-bottom-3 govuk-!-padding-left-2">
            <p class="govuk-body-s govuk-!-font-weight-bold govuk-!-margin-top-3">@cpvSelection.SelectionSummary:</p>
            <div class="govuk-!-margin-top-2">
                @foreach (var selectedCode in cpvSelection.SelectedCodes)
                {
                    <div class="govuk-tag govuk-tag--grey govuk-!-margin-right-1 govuk-!-margin-bottom-1">
                        @selectedCode
                    </div>
                }
            </div>
        </div>
    }
</div>

<partial name="_HierarchicalCodeSelector" model="(selectorOptions, (IHierarchicalCodeSelection)cpvSelection)" />