<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>CO.CDP.ApplicationRegistry.Api - Project Overview</title>
</head>
<body>

<h1>CO.CDP.ApplicationRegistry.Api - Project Overview</h1>

<h2>Table of Contents</h2>
<ol>
    <li><a href="#project-purpose">Project Purpose</a></li>
    <li><a href="#architecture-overview">Architecture Overview</a></li>
    <li><a href="#project-dependencies">Project Dependencies</a></li>
    <li><a href="#technology-stack">Technology Stack</a></li>
    <li><a href="#domain-model">Domain Model</a></li>
    <li><a href="#api-endpoints">API Endpoints</a></li>
    <li><a href="#authorization-model">Authorization Model</a></li>
    <li><a href="#service-layer">Service Layer</a></li>
    <li><a href="#data-access-layer">Data Access Layer</a></li>
    <li><a href="#caching-strategy">Caching Strategy</a></li>
    <li><a href="#integration-points">Integration Points</a></li>
    <li><a href="#configuration">Configuration</a></li>
    <li><a href="#development-guidelines">Development Guidelines</a></li>
</ol>

<hr/>

<h2 id="project-purpose">Project Purpose</h2>

<p>The <strong>Application Registry</strong> is a multi-tenant authorization and access control system for the Cabinet Office Digital Platform (CDP). It manages:</p>

<ul>
    <li><strong>Organisations</strong>: Business entities that use CDP applications</li>
    <li><strong>Applications</strong>: OAuth-enabled applications with their own permissions and roles</li>
    <li><strong>User Memberships</strong>: User access to organisations with role-based permissions</li>
    <li><strong>Application Access</strong>: Granular user-to-application assignments with role-based permissions</li>
    <li><strong>Claims Resolution</strong>: Centralized service for resolving user permissions across all organisations and applications</li>
</ul>

<h3>Key Use Cases</h3>

<ol>
    <li><strong>Multi-tenant Organization Management</strong>: Track which users belong to which organisations</li>
    <li><strong>Application Registry</strong>: Maintain a catalog of applications with their permissions and roles</li>
    <li><strong>Access Control</strong>: Manage which users can access which applications within each organisation</li>
    <li><strong>Claims Service</strong>: Provide a single endpoint for authorization services (like Sirsi Authority) to resolve user permissions</li>
    <li><strong>Secondary Organization Lookup</strong>: Reference CDP's master organisation data for validation</li>
</ol>

<hr/>

<h2 id="architecture-overview">Architecture Overview</h2>

<p>The project follows <strong>Clean Architecture</strong> principles with three distinct layers:</p>

<pre><code>┌─────────────────────────────────────────────────────────────┐
│                  CO.CDP.ApplicationRegistry.Api             │
│  (ASP.NET Core Web API - Controllers, DTOs, Middleware)    │
└────────────────────┬────────────────────────────────────────┘
                     │
                     │ depends on
                     ↓
┌─────────────────────────────────────────────────────────────┐
│               CO.CDP.ApplicationRegistry.Core               │
│   (Domain Logic - Entities, Services, Interfaces)          │
└────────────────────┬────────────────────────────────────────┘
                     │
                     │ depends on
                     ↓
┌─────────────────────────────────────────────────────────────┐
│          CO.CDP.ApplicationRegistry.Infrastructure          │
│  (Data Access - EF Core, Repositories, Caching)            │
└─────────────────────────────────────────────────────────────┘
</code></pre>

<h3>Layer Responsibilities</h3>

<ul>
    <li><strong>Api Layer</strong>: HTTP endpoints, request/response models, middleware, authentication/authorization</li>
    <li><strong>Core Layer</strong>: Business logic, domain entities, service interfaces, domain exceptions</li>
    <li><strong>Infrastructure Layer</strong>: Database access, repository implementations, caching, external service integration</li>
</ul>

<hr/>

<h2 id="project-dependencies">Project Dependencies</h2>

<h3>Direct NuGet Packages (Api Project)</h3>

<table>
    <thead>
        <tr>
            <th>Package</th>
            <th>Version</th>
            <th>Purpose</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>Microsoft.AspNetCore.Authentication.JwtBearer</code></td>
            <td>8.0.11</td>
            <td>JWT token authentication for securing API endpoints</td>
        </tr>
        <tr>
            <td><code>Microsoft.AspNetCore.OpenApi</code></td>
            <td>8.0.11</td>
            <td>OpenAPI/Swagger specification generation</td>
        </tr>
        <tr>
            <td><code>Serilog.AspNetCore</code></td>
            <td>8.0.3</td>
            <td>Structured logging framework</td>
        </tr>
        <tr>
            <td><code>Serilog.Enrichers.CorrelationId</code></td>
            <td>3.0.1</td>
            <td>Correlation ID enrichment for distributed tracing</td>
        </tr>
        <tr>
            <td><code>Serilog.Sinks.Console</code></td>
            <td>6.0.0</td>
            <td>Console logging output</td>
        </tr>
        <tr>
            <td><code>Swashbuckle.AspNetCore</code></td>
            <td>6.9.0</td>
            <td>Swagger UI for API documentation</td>
        </tr>
    </tbody>
</table>

<h3>Project References</h3>

<ul>
    <li><strong>CO.CDP.ApplicationRegistry.Core</strong>: Domain logic and service interfaces</li>
    <li><strong>CO.CDP.ApplicationRegistry.Infrastructure</strong>: Data access and external integrations</li>
</ul>

<h3>Transitive Dependencies (via Infrastructure)</h3>

<p>From <strong>CO.CDP.ApplicationRegistry.Infrastructure</strong>:</p>
<ul>
    <li><code>Microsoft.EntityFrameworkCore</code> (8.0.11) - ORM for database access</li>
    <li><code>Npgsql.EntityFrameworkCore.PostgreSQL</code> (8.0.10) - PostgreSQL provider</li>
    <li><code>Microsoft.Extensions.Caching.StackExchangeRedis</code> (8.0.11) - Redis caching</li>
    <li><code>StackExchange.Redis</code> (2.10.1) - Redis client</li>
    <li><code>Scrutor</code> (7.0.0) - Service decoration for caching</li>
    <li><code>CO.CDP.OrganisationInformation.Persistence</code> - CDP master organisation data access</li>
</ul>

<p>From <strong>CO.CDP.ApplicationRegistry.Core</strong>:</p>
<ul>
    <li><code>Microsoft.Extensions.DependencyInjection.Abstractions</code> (8.0.2)</li>
    <li><code>Microsoft.Extensions.Logging.Abstractions</code> (8.0.2)</li>
</ul>

<hr/>

<h2 id="technology-stack">Technology Stack</h2>

<table>
    <thead>
        <tr>
            <th>Component</th>
            <th>Technology</th>
            <th>Version</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><strong>Framework</strong></td>
            <td>.NET</td>
            <td>8.0</td>
        </tr>
        <tr>
            <td><strong>Web Framework</strong></td>
            <td>ASP.NET Core</td>
            <td>8.0</td>
        </tr>
        <tr>
            <td><strong>Database</strong></td>
            <td>PostgreSQL</td>
            <td>(via Npgsql 8.0.10)</td>
        </tr>
        <tr>
            <td><strong>ORM</strong></td>
            <td>Entity Framework Core</td>
            <td>8.0.11</td>
        </tr>
        <tr>
            <td><strong>Cache</strong></td>
            <td>Redis / In-Memory</td>
            <td>(StackExchange.Redis 2.10.1)</td>
        </tr>
        <tr>
            <td><strong>Authentication</strong></td>
            <td>JWT Bearer Tokens</td>
            <td>(Microsoft 8.0.11)</td>
        </tr>
        <tr>
            <td><strong>Logging</strong></td>
            <td>Serilog</td>
            <td>8.0.3</td>
        </tr>
        <tr>
            <td><strong>API Documentation</strong></td>
            <td>Swagger/OpenAPI</td>
            <td>6.9.0</td>
        </tr>
    </tbody>
</table>

<h3>Language Features</h3>
<ul>
    <li><strong>Target Framework</strong>: net8.0</li>
    <li><strong>Nullable Reference Types</strong>: Enabled</li>
    <li><strong>Implicit Usings</strong>: Enabled</li>
</ul>

<hr/>

<h2 id="domain-model">Domain Model</h2>

<h3>Core Entities</h3>

<h4>1. Organisation</h4>
<p>Represents a business entity in the Application Registry.</p>

<p><strong>Properties:</strong></p>
<ul>
    <li>Id: Guid</li>
    <li>CdpOrganisationGuid: Guid <em>(Links to CDP master organisation)</em></li>
    <li>Name: string</li>
    <li>Slug: string <em>(URL-friendly identifier)</em></li>
    <li>IsActive: bool <em>(soft delete)</em></li>
    <li>CreatedAt, CreatedBy, ModifiedAt, ModifiedBy</li>
</ul>

<p><strong>Relationships:</strong></p>
<ul>
    <li>Has many <code>UserOrganisationMembership</code></li>
    <li>Has many <code>OrganisationApplication</code></li>
</ul>

<h4>2. Application</h4>
<p>OAuth-enabled applications that users can access.</p>

<p><strong>Properties:</strong></p>
<ul>
    <li>Id: Guid</li>
    <li>Name: string</li>
    <li>ClientId: string <em>(OAuth client identifier, unique)</em></li>
    <li>Description: string?</li>
    <li>IsActive: bool</li>
    <li>CreatedAt, CreatedBy, ModifiedAt, ModifiedBy</li>
</ul>

<p><strong>Relationships:</strong></p>
<ul>
    <li>Has many <code>ApplicationPermission</code></li>
    <li>Has many <code>ApplicationRole</code></li>
    <li>Has many <code>OrganisationApplication</code></li>
</ul>

<h4>3. ApplicationPermission</h4>
<p>Granular permissions within an application (e.g., "read:documents", "write:documents").</p>

<p><strong>Properties:</strong></p>
<ul>
    <li>Id: Guid</li>
    <li>ApplicationId: Guid</li>
    <li>Name: string <em>(unique within application)</em></li>
    <li>Description: string?</li>
    <li>IsActive: bool</li>
</ul>

<p><strong>Relationships:</strong></p>
<ul>
    <li>Belongs to <code>Application</code></li>
    <li>Many-to-many with <code>ApplicationRole</code></li>
</ul>

<h4>4. ApplicationRole</h4>
<p>Groups of permissions (e.g., "Editor", "Viewer").</p>

<p><strong>Properties:</strong></p>
<ul>
    <li>Id: Guid</li>
    <li>ApplicationId: Guid</li>
    <li>Name: string <em>(unique within application)</em></li>
    <li>Description: string?</li>
    <li>IsActive: bool</li>
</ul>

<p><strong>Relationships:</strong></p>
<ul>
    <li>Belongs to <code>Application</code></li>
    <li>Many-to-many with <code>ApplicationPermission</code></li>
    <li>Many-to-many with <code>UserApplicationAssignment</code></li>
</ul>

<h4>5. UserOrganisationMembership</h4>
<p>Links users to organisations with a role.</p>

<p><strong>Properties:</strong></p>
<ul>
    <li>Id: Guid</li>
    <li>UserPrincipalId: string <em>(OneLogin 'sub' claim / CDP UserUrn)</em></li>
    <li>OrganisationId: Guid</li>
    <li>OrganisationRole: enum <em>(Member, Admin, Owner)</em></li>
    <li>IsActive: bool</li>
    <li>JoinedAt, InvitedBy, RemovedAt, RemovedBy</li>
</ul>

<p><strong>Relationships:</strong></p>
<ul>
    <li>Belongs to <code>Organisation</code></li>
    <li>Has many <code>UserApplicationAssignment</code></li>
</ul>

<h4>6. OrganisationApplication</h4>
<p>Enables an application for an organisation.</p>

<p><strong>Properties:</strong></p>
<ul>
    <li>Id: Guid</li>
    <li>OrganisationId: Guid</li>
    <li>ApplicationId: Guid</li>
    <li>IsActive: bool <em>(soft delete)</em></li>
    <li>EnabledAt, EnabledBy, DisabledAt, DisabledBy</li>
</ul>

<p><strong>Relationships:</strong></p>
<ul>
    <li>Belongs to <code>Organisation</code></li>
    <li>Belongs to <code>Application</code></li>
    <li>Has many <code>UserApplicationAssignment</code></li>
</ul>

<h4>7. UserApplicationAssignment</h4>
<p>Assigns a user to an application within an organisation with specific roles.</p>

<p><strong>Properties:</strong></p>
<ul>
    <li>Id: Guid</li>
    <li>UserOrganisationMembershipId: Guid</li>
    <li>OrganisationApplicationId: Guid</li>
    <li>IsActive: bool <em>(revoked assignments)</em></li>
    <li>AssignedAt, AssignedBy, RevokedAt, RevokedBy</li>
</ul>

<p><strong>Relationships:</strong></p>
<ul>
    <li>Belongs to <code>UserOrganisationMembership</code></li>
    <li>Belongs to <code>OrganisationApplication</code></li>
    <li>Many-to-many with <code>ApplicationRole</code></li>
</ul>

<h3>Entity Relationship Diagram</h3>

<pre><code>┌────────────────┐
│  Organisation  │
└────────┬───────┘
         │
         │ 1:N
         ↓
┌──────────────────────────┐         ┌─────────────┐
│ UserOrganisationMembership│←───────│   User      │
└────────┬─────────────────┘   N:1   │(External ID)│
         │                             └─────────────┘
         │ 1:N
         ↓
┌──────────────────────────┐
│ UserApplicationAssignment │
└────────┬─────────────────┘
         │
         │ N:1
         ↓
┌──────────────────────────┐
│  OrganisationApplication  │
└────────┬─────────────────┘
         │
         │ N:1
         ↓
┌─────────────────┐       ┌────────────────────┐
│   Application   │──────→│ ApplicationRole    │
└─────────────────┘ 1:N   └──────┬─────────────┘
         │                        │
         │ 1:N                    │ N:M
         ↓                        ↓
┌────────────────────┐    ┌──────────────────┐
│ ApplicationPermission│←──│   Role-Perms    │
└────────────────────┘ N:M└──────────────────┘
</code></pre>

<hr/>

<h2 id="api-endpoints">API Endpoints</h2>

<h3>1. Organisations Controller (<code>/api/organisations</code>)</h3>
<p><strong>Authorization</strong>: PlatformAdmin (create), OrganisationMember (read)</p>

<table>
    <thead>
        <tr>
            <th>Method</th>
            <th>Endpoint</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>POST</code></td>
            <td><code>/api/organisations</code></td>
            <td>Create new organisation</td>
        </tr>
        <tr>
            <td><code>GET</code></td>
            <td><code>/api/organisations</code></td>
            <td>List all organisations</td>
        </tr>
        <tr>
            <td><code>GET</code></td>
            <td><code>/api/organisations/{id}</code></td>
            <td>Get organisation by ID</td>
        </tr>
        <tr>
            <td><code>GET</code></td>
            <td><code>/api/organisations/slug/{slug}</code></td>
            <td>Get organisation by slug</td>
        </tr>
        <tr>
            <td><code>PUT</code></td>
            <td><code>/api/organisations/{id}</code></td>
            <td>Update organisation</td>
        </tr>
        <tr>
            <td><code>DELETE</code></td>
            <td><code>/api/organisations/{id}</code></td>
            <td>Soft delete organisation</td>
        </tr>
    </tbody>
</table>

<h3>2. Applications Controller (<code>/api/applications</code>)</h3>
<p><strong>Authorization</strong>: PlatformAdmin</p>

<table>
    <thead>
        <tr>
            <th>Method</th>
            <th>Endpoint</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>POST</code></td>
            <td><code>/api/applications</code></td>
            <td>Create application</td>
        </tr>
        <tr>
            <td><code>GET</code></td>
            <td><code>/api/applications</code></td>
            <td>List all applications</td>
        </tr>
        <tr>
            <td><code>GET</code></td>
            <td><code>/api/applications/{id}</code></td>
            <td>Get application by ID</td>
        </tr>
        <tr>
            <td><code>PUT</code></td>
            <td><code>/api/applications/{id}</code></td>
            <td>Update application</td>
        </tr>
        <tr>
            <td><code>DELETE</code></td>
            <td><code>/api/applications/{id}</code></td>
            <td>Soft delete application</td>
        </tr>
        <tr>
            <td colspan="3"><strong>Permissions</strong></td>
        </tr>
        <tr>
            <td><code>POST</code></td>
            <td><code>/api/applications/{id}/permissions</code></td>
            <td>Create permission</td>
        </tr>
        <tr>
            <td><code>GET</code></td>
            <td><code>/api/applications/{id}/permissions</code></td>
            <td>List permissions</td>
        </tr>
        <tr>
            <td><code>DELETE</code></td>
            <td><code>/api/applications/{id}/permissions/{permissionId}</code></td>
            <td>Delete permission</td>
        </tr>
        <tr>
            <td colspan="3"><strong>Roles</strong></td>
        </tr>
        <tr>
            <td><code>POST</code></td>
            <td><code>/api/applications/{id}/roles</code></td>
            <td>Create role</td>
        </tr>
        <tr>
            <td><code>GET</code></td>
            <td><code>/api/applications/{id}/roles</code></td>
            <td>List roles</td>
        </tr>
        <tr>
            <td><code>PUT</code></td>
            <td><code>/api/applications/{id}/roles/{roleId}</code></td>
            <td>Update role</td>
        </tr>
        <tr>
            <td><code>DELETE</code></td>
            <td><code>/api/applications/{id}/roles/{roleId}</code></td>
            <td>Delete role</td>
        </tr>
        <tr>
            <td><code>POST</code></td>
            <td><code>/api/applications/{id}/roles/{roleId}/permissions</code></td>
            <td>Assign permissions to role</td>
        </tr>
        <tr>
            <td><code>DELETE</code></td>
            <td><code>/api/applications/{id}/roles/{roleId}/permissions/{permissionId}</code></td>
            <td>Remove permission from role</td>
        </tr>
    </tbody>
</table>

<h3>3. Organisation Applications Controller</h3>
<p><strong>Route</strong>: <code>/api/organisations/{organisationId}/applications</code><br/>
<strong>Authorization</strong>: OrganisationAdmin (enable/disable), OrganisationMember (read)</p>

<table>
    <thead>
        <tr>
            <th>Method</th>
            <th>Endpoint</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>POST</code></td>
            <td><code>/api/organisations/{orgId}/applications</code></td>
            <td>Enable application for organisation</td>
        </tr>
        <tr>
            <td><code>GET</code></td>
            <td><code>/api/organisations/{orgId}/applications</code></td>
            <td>List enabled applications</td>
        </tr>
        <tr>
            <td><code>GET</code></td>
            <td><code>/api/organisations/{orgId}/applications/{appId}/enabled</code></td>
            <td>Check if application enabled</td>
        </tr>
        <tr>
            <td><code>DELETE</code></td>
            <td><code>/api/organisations/{orgId}/applications/{appId}</code></td>
            <td>Disable application</td>
        </tr>
        <tr>
            <td><code>GET</code></td>
            <td><code>/api/organisations/{orgId}/applications/users/{userPrincipalId}</code></td>
            <td>Get all applications assigned to a specific user</td>
        </tr>
    </tbody>
</table>

<h3>4. User Assignments Controller</h3>
<p><strong>Route</strong>: <code>/api/organisations/{organisationId}/users/{userPrincipalId}/assignments</code><br/>
<strong>Authorization</strong>: OrganisationAdmin (create/update/delete), OrganisationMember (read)</p>

<table>
    <thead>
        <tr>
            <th>Method</th>
            <th>Endpoint</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>POST</code></td>
            <td><code>/api/organisations/{orgId}/users/{userId}/assignments</code></td>
            <td>Assign user to application</td>
        </tr>
        <tr>
            <td><code>GET</code></td>
            <td><code>/api/organisations/{orgId}/users/{userId}/assignments</code></td>
            <td>List user's assignments</td>
        </tr>
        <tr>
            <td><code>GET</code></td>
            <td><code>/api/organisations/{orgId}/users/{userId}/assignments/{assignmentId}</code></td>
            <td>Get specific assignment</td>
        </tr>
        <tr>
            <td><code>PATCH</code></td>
            <td><code>/api/organisations/{orgId}/users/{userId}/assignments/{assignmentId}/roles</code></td>
            <td>Update assignment roles</td>
        </tr>
        <tr>
            <td><code>DELETE</code></td>
            <td><code>/api/organisations/{orgId}/users/{userId}/assignments/{assignmentId}</code></td>
            <td>Revoke assignment</td>
        </tr>
    </tbody>
</table>

<h3>5. Claims Controller (<code>/api/claims</code>)</h3>
<p><strong>Authorization</strong>: ServiceAccount (for Sirsi Authority)</p>

<table>
    <thead>
        <tr>
            <th>Method</th>
            <th>Endpoint</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>GET</code></td>
            <td><code>/api/claims/users/{userPrincipalId}</code></td>
            <td>Get all user claims across organisations/applications</td>
        </tr>
    </tbody>
</table>

<p><strong>Response Structure</strong>:</p>
<pre><code>{
  "userPrincipalId": "user-123",
  "organisations": [
    {
      "organisationId": "org-guid",
      "organisationName": "Example Org",
      "organisationRole": "Admin",
      "applications": [
        {
          "applicationId": "app-guid",
          "applicationName": "My App",
          "clientId": "oauth-client-id",
          "roles": ["Editor", "Viewer"],
          "permissions": ["read:docs", "write:docs"]
        }
      ]
    }
  ]
}
</code></pre>

<hr/>

<h2 id="authorization-model">Authorization Model</h2>

<h3>Two-Tier Authorization System</h3>

<p>The Application Registry implements a <strong>two-tier authorization model</strong>:</p>

<ol>
    <li><strong>Organisation-Level Authorization</strong>: User must be a member of the organisation</li>
    <li><strong>Application-Level Authorization</strong>: User must have specific assignments within that organisation</li>
</ol>

<h3>Authorization Policies</h3>

<p>Defined in <code>Authorization/AuthorizationPolicies.cs</code>:</p>

<table>
    <thead>
        <tr>
            <th>Policy</th>
            <th>Requirements</th>
            <th>Handler</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>PlatformAdmin</code></td>
            <td>User has platform admin role</td>
            <td>Built-in</td>
        </tr>
        <tr>
            <td><code>ServiceAccount</code></td>
            <td>JWT from trusted service account</td>
            <td>Built-in</td>
        </tr>
        <tr>
            <td><code>OrganisationMember</code></td>
            <td>User is member of organisation in route</td>
            <td><code>OrganisationMemberHandler</code></td>
        </tr>
        <tr>
            <td><code>OrganisationAdmin</code></td>
            <td>User is Admin or Owner of organisation</td>
            <td><code>OrganisationAdminHandler</code></td>
        </tr>
    </tbody>
</table>

<h3>Identity Mapping</h3>

<pre><code>OneLogin 'sub' claim  =  ApplicationRegistry.UserPrincipalId  =  CDP Person.UserUrn
</code></pre>

<p>This allows the Application Registry to:</p>
<ul>
    <li>Store user references without duplicating user data</li>
    <li>Perform secondary lookups to CDP's master user/organisation data when needed</li>
    <li>Maintain loose coupling between systems</li>
</ul>

<h3>Authorization Flow</h3>

<pre><code>1. User requests access to /api/organisations/{orgId}/users/{userId}/assignments
2. JWT Bearer token validated
3. Extract 'sub' claim (UserPrincipalId)
4. OrganisationAdminHandler checks:
   - Does UserPrincipalId have membership in {orgId}?
   - Is their OrganisationRole = Admin or Owner?
5. If yes, allow access
6. If no, return 403 Forbidden
</code></pre>

<hr/>

<h2 id="service-layer">Service Layer</h2>

<h3>Core Services (<code>CO.CDP.ApplicationRegistry.Core/Services</code>)</h3>

<h4>1. IOrganisationService / OrganisationService</h4>
<p>Manages organisation CRUD operations.</p>

<p><strong>Key Methods:</strong></p>
<ul>
    <li><code>CreateOrganisationAsync(name, cdpOrganisationGuid)</code> - Creates organisation with auto-generated slug</li>
    <li><code>UpdateOrganisationAsync(id, name)</code> - Updates name and regenerates slug if needed</li>
    <li><code>GetBySlugAsync(slug)</code> - Retrieves organisation by URL-friendly slug</li>
    <li><code>SoftDeleteAsync(id)</code> - Soft deletes organisation</li>
</ul>

<h4>2. IApplicationService / ApplicationService</h4>
<p>Manages application lifecycle.</p>

<p><strong>Key Methods:</strong></p>
<ul>
    <li><code>CreateApplicationAsync(name, clientId, description)</code> - Creates application with unique ClientId</li>
    <li><code>GetByClientIdAsync(clientId)</code> - Retrieves by OAuth client ID</li>
    <li><code>UpdateApplicationAsync(id, name, description)</code></li>
    <li><code>SoftDeleteAsync(id)</code></li>
</ul>

<p><strong>Validation:</strong></p>
<ul>
    <li>ClientId must be unique across all applications</li>
</ul>

<h4>3. IPermissionService / PermissionService</h4>
<p>Manages permissions within applications.</p>

<p><strong>Key Methods:</strong></p>
<ul>
    <li><code>CreatePermissionAsync(applicationId, name, description)</code> - Creates permission</li>
    <li><code>GetPermissionsByApplicationAsync(applicationId)</code> - Lists all permissions for an application</li>
</ul>

<p><strong>Validation:</strong></p>
<ul>
    <li>Permission names must be unique within each application</li>
</ul>

<h4>4. IRoleService / RoleService</h4>
<p>Manages roles and role-permission assignments.</p>

<p><strong>Key Methods:</strong></p>
<ul>
    <li><code>CreateRoleAsync(applicationId, name, description)</code> - Creates role</li>
    <li><code>UpdateRoleAsync(roleId, name, description)</code> - Updates role metadata</li>
    <li><code>AssignPermissionsAsync(roleId, permissionIds)</code> - Assigns multiple permissions to role</li>
    <li><code>RemovePermissionAsync(roleId, permissionId)</code> - Removes single permission from role</li>
</ul>

<p><strong>Validation:</strong></p>
<ul>
    <li>Role names must be unique within each application</li>
    <li>Permissions must belong to the same application as the role</li>
</ul>

<h4>5. IOrganisationApplicationService / OrganisationApplicationService</h4>
<p>Manages application enablement for organisations.</p>

<p><strong>Key Methods:</strong></p>
<ul>
    <li><code>EnableApplicationAsync(organisationId, applicationId)</code> - Enables application</li>
    <li><code>DisableApplicationAsync(organisationId, applicationId)</code> - Disables application</li>
    <li><code>IsApplicationEnabledAsync(organisationId, applicationId)</code> - Checks status</li>
    <li><code>GetApplicationsByUserAsync(organisationId, userPrincipalId)</code> - Gets all applications assigned to a specific user within an organisation</li>
</ul>

<p><strong>Features:</strong></p>
<ul>
    <li>Supports re-enabling previously disabled applications</li>
    <li>Tracks who enabled/disabled and when</li>
    <li>Retrieves user-specific application assignments with membership validation</li>
</ul>

<p><strong>Validation:</strong></p>
<ul>
    <li>Verifies organisation exists and is active</li>
    <li>Verifies user is an active member of the organisation</li>
    <li>Returns only active applications from active assignments</li>
</ul>

<h4>6. IUserAssignmentService / UserAssignmentService</h4>
<p>Manages user-to-application assignments.</p>

<p><strong>Key Methods:</strong></p>
<ul>
    <li><code>AssignUserToApplicationAsync(orgId, userId, appId, roleIds)</code> - Assigns user with roles</li>
    <li><code>UpdateAssignmentRolesAsync(assignmentId, roleIds)</code> - Updates assigned roles</li>
    <li><code>RevokeAssignmentAsync(assignmentId)</code> - Soft deletes assignment</li>
    <li><code>GetUserAssignmentsInOrganisationAsync(orgId, userId)</code> - Lists user's assignments</li>
</ul>

<p><strong>Validation:</strong></p>
<ul>
    <li>User must be a member of the organisation</li>
    <li>Application must be enabled for the organisation</li>
    <li>Prevents duplicate assignments</li>
</ul>

<h4>7. IClaimsService / ClaimsService</h4>
<p>Resolves user permissions across all organisations and applications.</p>

<p><strong>Key Methods:</strong></p>
<ul>
    <li><code>GetUserClaimsAsync(userPrincipalId)</code> - Returns complete claims structure</li>
</ul>

<p><strong>Features:</strong></p>
<ul>
    <li>Single database query with full EF Core navigation property loading</li>
    <li>Groups results by organisation → application hierarchy</li>
    <li>Returns flattened permission list from all assigned roles</li>
</ul>

<h4>8. IClaimsCacheService / CachedClaimsService</h4>
<p>Caching decorator for ClaimsService.</p>

<p><strong>Key Methods:</strong></p>
<ul>
    <li><code>GetUserClaimsAsync(userPrincipalId)</code> - Cached version</li>
    <li><code>InvalidateUserClaimsAsync(userPrincipalId)</code> - Invalidates specific user</li>
    <li><code>InvalidateOrganisationClaimsAsync(organisationId)</code> - Invalidates all users in org</li>
    <li><code>InvalidateApplicationClaimsAsync(applicationId)</code> - Invalidates all users with app access</li>
</ul>

<p><strong>Cache Strategy:</strong></p>
<ul>
    <li>Cache Duration: 15 minutes</li>
    <li>Cache Key Pattern: <code>claims:user:{userPrincipalId}</code></li>
    <li>Serialization: JSON via System.Text.Json</li>
    <li>Storage: Redis (production) or In-Memory (development)</li>
</ul>

<h4>9. ISlugGeneratorService / SlugGeneratorService</h4>
<p>Generates URL-friendly slugs from organisation names.</p>

<p><strong>Features:</strong></p>
<ul>
    <li>Converts to lowercase</li>
    <li>Replaces spaces/special characters with hyphens</li>
    <li>Ensures uniqueness by appending incremental suffix if needed</li>
</ul>

<hr/>

<h2 id="data-access-layer">Data Access Layer</h2>

<h3>Repository Pattern (<code>CO.CDP.ApplicationRegistry.Infrastructure/Repositories</code>)</h3>

<h4>Base Repositories</h4>
<ul>
    <li><strong>IRepository&lt;T&gt;</strong> - Generic CRUD operations</li>
    <li><strong>ISoftDeleteRepository&lt;T&gt;</strong> - Adds soft delete functionality</li>
    <li><strong>Repository&lt;T&gt;</strong> - Base implementation</li>
    <li><strong>SoftDeleteRepository&lt;T&gt;</strong> - Adds IsActive filtering</li>
</ul>

<h4>Specialized Repositories</h4>

<ol>
    <li><strong>IOrganisationRepository / OrganisationRepository</strong>
        <ul>
            <li><code>GetBySlugAsync(slug)</code> - Retrieve by slug</li>
            <li><code>SlugExistsAsync(slug, excludeId)</code> - Check slug uniqueness</li>
        </ul>
    </li>
    <li><strong>IApplicationRepository / ApplicationRepository</strong>
        <ul>
            <li><code>GetByClientIdAsync(clientId)</code> - Retrieve by OAuth client ID</li>
            <li><code>ClientIdExistsAsync(clientId)</code> - Check uniqueness</li>
        </ul>
    </li>
    <li><strong>IPermissionRepository / PermissionRepository</strong>
        <ul>
            <li><code>GetByApplicationIdAsync(applicationId)</code> - List permissions</li>
            <li><code>NameExistsAsync(applicationId, name, excludeId)</code> - Check uniqueness</li>
        </ul>
    </li>
    <li><strong>IRoleRepository / RoleRepository</strong>
        <ul>
            <li><code>GetWithPermissionsAsync(roleId)</code> - Load role with permissions</li>
            <li><code>NameExistsAsync(applicationId, name, excludeId)</code> - Check uniqueness</li>
        </ul>
    </li>
    <li><strong>IUserOrganisationMembershipRepository / UserOrganisationMembershipRepository</strong>
        <ul>
            <li><code>GetByUserAndOrganisationAsync(userId, orgId)</code> - Get specific membership</li>
            <li><code>GetByUserPrincipalIdAsync(userId, includeInactive)</code> - List user's memberships</li>
            <li><code>IsMemberAsync(userId, orgId)</code> - Quick membership check</li>
            <li><code>IsAdminAsync(userId, orgId)</code> - Check admin/owner role</li>
        </ul>
    </li>
    <li><strong>IOrganisationApplicationRepository / OrganisationApplicationRepository</strong>
        <ul>
            <li><code>GetByOrganisationAndApplicationAsync(orgId, appId)</code> - Get enablement</li>
            <li><code>GetByOrganisationIdAsync(orgId, includeInactive)</code> - List enabled apps</li>
        </ul>
    </li>
    <li><strong>IUserApplicationAssignmentRepository / UserApplicationAssignmentRepository</strong>
        <ul>
            <li><code>GetByMembershipAndOrgAppAsync(membershipId, orgAppId)</code> - Get specific assignment</li>
            <li><code>GetUserAssignmentsForClaimsAsync(userId)</code> - Optimized query for claims resolution</li>
        </ul>
    </li>
</ol>

<h3>Unit of Work Pattern</h3>

<p><strong>IUnitOfWork</strong> provides:</p>
<ul>
    <li>Transaction management</li>
    <li>Access to all repositories</li>
    <li><code>SaveChangesAsync()</code> - Commits all changes atomically</li>
</ul>

<h3>Database Context</h3>

<p><strong>ApplicationRegistryDbContext</strong> (EF Core):</p>
<ul>
    <li>PostgreSQL provider (Npgsql)</li>
    <li>Audit interceptor for automatic CreatedAt/ModifiedAt tracking</li>
    <li>Soft delete query filters</li>
    <li>Retry on failure (3 attempts, 30s max delay)</li>
</ul>

<h3>Auditing</h3>

<p><strong>AuditableEntitySaveChangesInterceptor</strong>:</p>
<ul>
    <li>Automatically sets <code>CreatedAt</code> and <code>CreatedBy</code> on insert</li>
    <li>Automatically sets <code>ModifiedAt</code> and <code>ModifiedBy</code> on update</li>
    <li>Uses <code>ICurrentUserService</code> to get current user's UserPrincipalId</li>
</ul>

<hr/>

<h2 id="caching-strategy">Caching Strategy</h2>

<h3>Architecture</h3>

<p>The caching layer uses the <strong>Decorator Pattern</strong> to wrap the ClaimsService:</p>

<pre><code>ClaimsController
       ↓
IClaimsCacheService (decorated)
       ↓
CachedClaimsService (decorator)
       ↓
ClaimsService (core implementation)
</code></pre>

<h3>Configuration</h3>

<p><strong>Infrastructure Service Registration:</strong></p>
<pre><code>services.AddApplicationRegistryCaching(redisConnectionString);
</code></pre>

<ul>
    <li><strong>Development</strong>: Uses in-memory distributed cache (<code>AddDistributedMemoryCache()</code>)</li>
    <li><strong>Production</strong>: Uses Redis (<code>AddStackExchangeRedisCache()</code>)</li>
</ul>

<h3>Cache Keys</h3>

<p>Defined in <code>Core/Constants/CacheKeys.cs</code>:</p>
<ul>
    <li>User Claims: <code>claims:user:{userPrincipalId}</code></li>
    <li>Organisation Index: <code>claims:org:{organisationId}</code> (reserved for future use)</li>
    <li>Application Index: <code>claims:app:{applicationId}</code> (reserved for future use)</li>
</ul>

<h3>Cache Invalidation</h3>

<p><strong>Manual Invalidation:</strong></p>
<ul>
    <li><code>InvalidateUserClaimsAsync(userPrincipalId)</code> - Removes specific user's cache</li>
    <li><code>InvalidateOrganisationClaimsAsync(organisationId)</code> - Logs warning (relies on TTL)</li>
    <li><code>InvalidateApplicationClaimsAsync(applicationId)</code> - Logs warning (relies on TTL)</li>
</ul>

<p><strong>Automatic Expiration:</strong></p>
<ul>
    <li>TTL: 15 minutes</li>
    <li>All cached claims expire automatically</li>
</ul>

<p><strong>Future Enhancements:</strong></p>
<p>To improve invalidation for organisations/applications, implement:</p>
<ol>
    <li>Secondary index: Store list of affected userPrincipalIds per org/app</li>
    <li>On invalidation, iterate and remove all affected user caches</li>
    <li>Trade-off: Additional cache storage vs. improved cache coherence</li>
</ol>

<h3>Serialization</h3>

<ul>
    <li>Format: JSON</li>
    <li>Library: System.Text.Json</li>
    <li>Options: <code>PropertyNameCaseInsensitive = true</code></li>
</ul>

<hr/>

<h2 id="integration-points">Integration Points</h2>

<h3>1. CDP Organisation Information Service</h3>

<p><strong>Purpose</strong>: Secondary lookup for organisation data validation.</p>

<p><strong>Integration:</strong></p>
<ul>
    <li>Project Reference: <code>CO.CDP.OrganisationInformation.Persistence</code></li>
    <li>DbContext: <code>OrganisationInformationContext</code> (separate database connection)</li>
    <li>Repositories: <code>IOrganisationRepository</code>, <code>IPersonRepository</code> (CDP interfaces)</li>
</ul>

<p><strong>Data Flow:</strong></p>
<pre><code>ApplicationRegistry.Organisation (CdpOrganisationGuid)
         ↓ (reference, not FK)
CDP.OrganisationInformation.Organisation (Guid)
</code></pre>

<p><strong>Use Cases:</strong></p>
<ul>
    <li>Validate <code>CdpOrganisationGuid</code> exists in CDP before creating ApplicationRegistry.Organisation</li>
    <li>Retrieve additional organisation details when needed</li>
    <li>Maintain loose coupling between systems</li>
</ul>

<p><strong>Infrastructure Service:</strong></p>
<ul>
    <li><code>IOrganisationLookupService</code> - Service for performing CDP lookups</li>
</ul>

<h3>2. Sirsi Authority Service</h3>

<p><strong>Purpose</strong>: JWT token service that validates user permissions.</p>

<p><strong>Integration:</strong></p>
<ul>
    <li>Sirsi Authority calls <code>/api/claims/users/{userPrincipalId}</code></li>
    <li>Uses ServiceAccount JWT for authentication</li>
    <li>Receives complete claims structure</li>
    <li>Caches results (ApplicationRegistry caching + Sirsi's own caching)</li>
</ul>

<p><strong>Authorization Flow:</strong></p>
<pre><code>1. User requests resource from CDP application
2. Application validates JWT token
3. Application needs to check user permissions
4. Application calls Sirsi Authority with UserPrincipalId
5. Sirsi Authority calls ApplicationRegistry Claims API
6. ApplicationRegistry returns full claims (cached)
7. Sirsi Authority generates enriched JWT with claims
8. Application uses JWT claims for fine-grained authorization
</code></pre>

<h3>3. OneLogin Identity Provider</h3>

<p><strong>Integration:</strong></p>
<ul>
    <li>JWT Bearer token authentication</li>
    <li><code>sub</code> claim contains UserPrincipalId</li>
    <li>ApplicationRegistry stores UserPrincipalId (not user profile data)</li>
</ul>

<p><strong>Identity Flow:</strong></p>
<pre><code>OneLogin → JWT with 'sub' claim → ApplicationRegistry (UserPrincipalId)
                                          ↓
                                   CDP Person.UserUrn
</code></pre>

<hr/>

<h2 id="configuration">Configuration</h2>

<h3>Required Configuration (appsettings.json)</h3>

<p><strong>Note:</strong> JSON does not allow comments. Remove comments before using.</p>

<pre><code>{
  "ConnectionStrings": {
    "ApplicationRegistryConnection": "Host=localhost;Database=application_registry;Username=user;Password=pass",
    "CdpOrganisationConnection": "Host=localhost;Database=cdp_organisation;Username=user;Password=pass"
  },
  "Authentication": {
    "JwtBearer": {
      "Authority": "https://login.microsoftonline.com/{tenant-id}",
      "Audience": "api://application-registry",
      "ValidateIssuer": true,
      "ValidateAudience": true
    }
  },
  "Caching": {
    "RedisConnection": "localhost:6379"
  },
  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      { "Name": "Console" }
    ],
    "Enrich": ["FromLogContext", "WithCorrelationId"]
  }
}
</code></pre>

<p><em>Note: <code>RedisConnection</code> is optional; if not provided, the system uses in-memory caching.</em></p>

<h3>Environment-Specific Configuration</h3>

<ul>
    <li><strong>Development</strong>: Uses in-memory cache, detailed logging</li>
    <li><strong>Staging</strong>: Uses Redis, structured logging to console</li>
    <li><strong>Production</strong>: Uses Redis, structured logging to external service (e.g., Application Insights)</li>
</ul>

<h3>Service Registration (Program.cs)</h3>

<pre><code>// Core services
builder.Services.AddApplicationRegistryCore();

// Infrastructure services (database, repositories)
builder.Services.AddApplicationRegistryInfrastructure(
    connectionString: builder.Configuration.GetConnectionString("ApplicationRegistryConnection"),
    cdpConnectionString: builder.Configuration.GetConnectionString("CdpOrganisationConnection")
);

// Caching layer
builder.Services.AddApplicationRegistryCaching(
    redisConnectionString: builder.Configuration["Caching:RedisConnection"]
);

// Authentication
builder.Services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme)
    .AddJwtBearer(options =&gt; {
        options.Authority = builder.Configuration["Authentication:JwtBearer:Authority"];
        options.Audience = builder.Configuration["Authentication:JwtBearer:Audience"];
    });

// Authorization policies
builder.Services.AddAuthorization(options =&gt;
{
    options.AddPolicy("PlatformAdmin", policy =&gt; policy.RequireRole("PlatformAdmin"));
    options.AddPolicy("ServiceAccount", policy =&gt; policy.RequireRole("ServiceAccount"));
    options.AddPolicy("OrganisationMember", policy =&gt; policy.AddRequirements(new OrganisationMemberRequirement()));
    options.AddPolicy("OrganisationAdmin", policy =&gt; policy.AddRequirements(new OrganisationAdminRequirement()));
});

// Current user service
builder.Services.AddHttpContextAccessor();
builder.Services.AddScoped&lt;ICurrentUserService, CurrentUserService&gt;();
</code></pre>

<hr/>

<h2 id="development-guidelines">Development Guidelines</h2>

<h3>1. Adding a New Entity</h3>

<ol>
    <li>Create entity class in <code>Core/Entities/</code></li>
    <li>Implement <code>IEntity</code>, <code>IAuditable</code>, <code>ISoftDelete</code> as needed</li>
    <li>Create repository interface in <code>Core/Interfaces/</code></li>
    <li>Implement repository in <code>Infrastructure/Repositories/</code></li>
    <li>Add DbSet to <code>ApplicationRegistryDbContext</code></li>
    <li>Create EF Core configuration in <code>Infrastructure/Data/Configurations/</code></li>
    <li>Generate and apply migration</li>
    <li>Update <code>IUnitOfWork</code> to include new repository</li>
</ol>

<h3>2. Adding a New Service</h3>

<ol>
    <li>Define interface in <code>Core/Services/I{ServiceName}.cs</code></li>
    <li>Implement service in <code>Core/Services/{ServiceName}.cs</code></li>
    <li>Register in <code>Core/ServiceCollectionExtensions.cs</code></li>
    <li>Create custom exceptions in <code>Core/Exceptions/Exceptions.cs</code></li>
    <li>Write unit tests in <code>UnitTests/Core/Services/</code></li>
</ol>

<h3>3. Adding a New Controller</h3>

<ol>
    <li>Create controller in <code>Api/Controllers/{ResourceName}Controller.cs</code></li>
    <li>Create request DTOs in <code>Api/Models/Requests/</code></li>
    <li>Create response DTOs in <code>Api/Models/Responses/</code></li>
    <li>Add mapping extensions (<code>ToResponse()</code>) to response DTOs</li>
    <li>Apply appropriate authorization policies</li>
    <li>Add XML documentation comments</li>
    <li>Write integration tests</li>
</ol>

<h3>4. Database Migrations</h3>

<pre><code># Create migration
dotnet ef migrations add MigrationName --project Infrastructure --startup-project Api

# Apply migration
dotnet ef database update --project Infrastructure --startup-project Api

# Generate SQL script
dotnet ef migrations script --project Infrastructure --startup-project Api --output migration.sql
</code></pre>

<h3>5. Testing Strategy</h3>

<p><strong>Unit Tests</strong>: <code>CO.CDP.ApplicationRegistry.UnitTests</code></p>
<ul>
    <li>Test services with mocked repositories</li>
    <li>Test authorization handlers</li>
    <li>Test middleware components</li>
</ul>

<p><strong>Integration Tests</strong>: (Recommended to add)</p>
<ul>
    <li>Test API endpoints with in-memory database</li>
    <li>Test database constraints and migrations</li>
    <li>Test caching behavior</li>
</ul>

<h3>6. Logging Standards</h3>

<p>Use structured logging with Serilog:</p>

<pre><code>_logger.LogInformation(
    "User {UserPrincipalId} assigned to application {ApplicationId} in organisation {OrganisationId}",
    userPrincipalId, applicationId, organisationId);
</code></pre>

<ul>
    <li>Use log levels appropriately (Debug, Information, Warning, Error)</li>
    <li>Include correlation IDs for distributed tracing</li>
    <li>Never log sensitive data (passwords, tokens)</li>
</ul>

<h3>7. Error Handling</h3>

<ul>
    <li>Use custom exceptions from <code>Core/Exceptions/</code></li>
    <li>Controllers catch domain exceptions and return appropriate HTTP status codes</li>
    <li>Global exception handler in <code>Api/Middleware/GlobalExceptionHandlerMiddleware.cs</code></li>
    <li>Always return structured error responses</li>
</ul>

<h3>8. Code Style</h3>

<ul>
    <li>Follow C# naming conventions</li>
    <li>Use nullable reference types</li>
    <li>Enable implicit usings</li>
    <li>Use records for DTOs</li>
    <li>Use expression-bodied members where appropriate</li>
    <li>XML documentation comments for public APIs</li>
</ul>

<h3>9. Security Best Practices</h3>

<ul>
    <li>Always validate input with Data Annotations</li>
    <li>Use parameterized queries (EF Core does this automatically)</li>
    <li>Never trust client-provided IDs for authorization (check membership)</li>
    <li>Use authorization policies, not manual checks in controllers</li>
    <li>Hash sensitive data, never store in plain text</li>
    <li>Use HTTPS in production</li>
    <li>Implement rate limiting (recommended to add)</li>
</ul>

<h3>10. Performance Considerations</h3>

<ul>
    <li>Use <code>AsNoTracking()</code> for read-only queries</li>
    <li>Implement pagination for list endpoints (recommended to add)</li>
    <li>Use <code>Include()</code> strategically to avoid N+1 queries</li>
    <li>Cache frequently accessed data (already implemented for claims)</li>
    <li>Use background jobs for long-running operations (if needed in future)</li>
</ul>

<hr/>

<h2>Summary</h2>

<p>The <strong>CO.CDP.ApplicationRegistry.Api</strong> is a robust, multi-tenant authorization system built with:</p>

<ul>
    <li>✅ Clean Architecture principles</li>
    <li>✅ Entity Framework Core with PostgreSQL</li>
    <li>✅ JWT Bearer authentication</li>
    <li>✅ Policy-based authorization</li>
    <li>✅ Redis caching with decorator pattern</li>
    <li>✅ Comprehensive service layer</li>
    <li>✅ Repository and Unit of Work patterns</li>
    <li>✅ Integration with CDP Organisation Information service</li>
    <li>✅ Designed for Sirsi Authority claims resolution</li>
</ul>

<h3>Key Features</h3>

<ul>
    <li>Multi-tenant organisation management</li>
    <li>Application registry with OAuth ClientId support</li>
    <li>Granular permission and role system</li>
    <li>User-to-application assignments with role-based access</li>
    <li>Centralized claims resolution API</li>
    <li>15-minute claims caching for performance</li>
    <li>Soft delete support across all entities</li>
    <li>Audit trail (created/modified by/at)</li>
    <li>Loose coupling with CDP master data</li>
</ul>

<h3>Next Steps for Developers</h3>

<ol>
    <li>Review entity relationships in <code>Core/Entities/</code></li>
    <li>Explore service implementations in <code>Core/Services/</code></li>
    <li>Examine repository implementations in <code>Infrastructure/Repositories/</code></li>
    <li>Test API endpoints using Swagger UI at <code>/swagger</code></li>
    <li>Write unit tests for new features</li>
    <li>Configure Redis for production deployment</li>
    <li>Set up JWT authentication with OneLogin</li>
    <li>Configure database migrations for target environment</li>
</ol>

<hr/>

<p><strong>For Questions or Support</strong>: Contact the CDP Platform Team</p>

</body>
</html>
